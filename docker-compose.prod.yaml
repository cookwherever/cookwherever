version: '3.6'
services:
  frontend:
    image: ghcr.io/cookwherever/frontend@sha256:4c0e0de14597e1b1e4248d16520e40a747ef74c6651ce6c660cb8fe7d5997cce
    restart: always
    ports:
      - '80:80'
    labels:
      kompose.service.expose: "recipes.cookwherever.com"
      kompose.service.expose.tls-secret: "cookwherever-com-tls"
      kompose.image-pull-secret: "ghcr-pull-secret"
  wiki:
    image: ghcr.io/cookwherever/wiki@sha256:d06c7d5bbf6d126d013113cb16bb1b6b36dbe3aba894672bfe52e2add9d5f39b
    restart: always
    ports:
      - '80:80'
    labels:
      kompose.service.expose: "cookwherever.com"
      kompose.service.expose.tls-secret: "cookwherever-com-tls"
      kompose.image-pull-secret: "ghcr-pull-secret"
  hasura-auth:
    environment:
      AUTH_SERVER_URL: https://login.cookwherever.com
      AUTH_CLIENT_URL: https://cookwherever.com
      AUTH_PROVIDER_GOOGLE_CLIENT_ID: 875893625137-o31bbtcuu3qvou8l617hkd35letm8451.apps.googleusercontent.com
      AUTH_PROVIDER_GOOGLE_CLIENT_SECRET: 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
  graphql-engine:
    image: hasura/graphql-engine:v2.4.0
    # image: ghcr.io/cookwherever/hasura:latest
    labels:
      kompose.image-pull-secret: "ghcr-pull-secret"
